{"ast":null,"code":"import _classCallCheck from \"/Users/camilo_tabares/Desktop/react/code-challenge/support-files/post-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/camilo_tabares/Desktop/react/code-challenge/support-files/post-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/camilo_tabares/Desktop/react/code-challenge/support-files/post-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/camilo_tabares/Desktop/react/code-challenge/support-files/post-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/camilo_tabares/Desktop/react/code-challenge/support-files/post-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/camilo_tabares/Desktop/react/code-challenge/support-files/post-app/src/app/components/oauth/oAuth.js\";\nimport React, { Component } from 'react';\nimport FontAwesome from 'react-fontawesome'; // import { API_URL } from './config'\n\nvar OAuth =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(OAuth, _Component);\n\n  function OAuth() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, OAuth);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(OAuth)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      user: {},\n      disabled: ''\n    };\n    return _this;\n  }\n\n  _createClass(OAuth, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          socket = _this$props.socket,\n          provider = _this$props.provider;\n      socket.on(provider, function (user) {\n        _this2.popup.close();\n\n        _this2.setState({\n          user: user\n        });\n      });\n    }\n  }, {\n    key: \"checkPopup\",\n    value: function checkPopup() {\n      var _this3 = this;\n\n      var check = setInterval(function () {\n        var popup = _this3.popup;\n\n        if (!popup || popup.closed || popup.closed === undefined) {\n          clearInterval(check);\n\n          _this3.setState({\n            disabled: ''\n          });\n        }\n      }, 1000);\n    } // Launches the popup by making a request to the server and then \n    // passes along the socket id so it can be used to send back user \n    // data to the appropriate socket on the connected client.\n\n  }, {\n    key: \"openPopup\",\n    value: function openPopup() {\n      var _this$props2 = this.props,\n          provider = _this$props2.provider,\n          socket = _this$props2.socket;\n      var width = 600,\n          height = 600;\n      var left = window.innerWidth / 2 - width / 2;\n      var top = window.innerHeight / 2 - height / 2; // const url = `${API_URL}/${provider}?socketId=${socket.id}`\n\n      return window.open(url, '', \"toolbar=no, location=no, directories=no, status=no, menubar=no, \\n      scrollbars=no, resizable=no, copyhistory=no, width=\".concat(width, \", \\n      height=\").concat(height, \", top=\").concat(top, \", left=\").concat(left));\n    } // Kicks off the processes of opening the popup on the server and listening \n    // to the popup. It also disables the login button so the user can not \n    // attempt to login to the provider twice.\n\n  }, {\n    key: \"startAuth\",\n    value: function startAuth(e) {\n      if (!this.state.disabled) {\n        e.preventDefault();\n        this.popup = this.openPopup();\n        this.checkPopup();\n        this.setState({\n          disabled: 'disabled'\n        });\n      }\n    }\n  }, {\n    key: \"closeCard\",\n    value: function closeCard() {\n      this.setState({\n        user: {}\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state$user = this.state.user,\n          name = _this$state$user.name,\n          photo = _this$state$user.photo;\n      var provider = this.props.provider;\n      var disabled = this.state.disabled;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, name ? React.createElement(\"div\", {\n        className: 'card',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: photo,\n        alt: name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }), React.createElement(FontAwesome, {\n        name: 'times-circle',\n        className: 'close',\n        onClick: this.closeCard.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, name)) : React.createElement(\"div\", {\n        className: 'button-wrapper fadein-fast',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.startAuth.bind(this),\n        className: \"\".concat(provider, \" \").concat(disabled, \" button\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(FontAwesome, {\n        name: provider,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return OAuth;\n}(Component);\n\nexport { OAuth as default };","map":{"version":3,"sources":["/Users/camilo_tabares/Desktop/react/code-challenge/support-files/post-app/src/app/components/oauth/oAuth.js"],"names":["React","Component","FontAwesome","OAuth","state","user","disabled","props","socket","provider","on","popup","close","setState","check","setInterval","closed","undefined","clearInterval","width","height","left","window","innerWidth","top","innerHeight","open","url","e","preventDefault","openPopup","checkPopup","name","photo","closeCard","bind","startAuth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport FontAwesome from 'react-fontawesome'\n// import { API_URL } from './config'\n\nexport default class OAuth extends Component {\n  \n  state = {\n    user: {},\n    disabled: ''\n  }\n\n  componentDidMount() {\n    const { socket, provider } = this.props\n\n    socket.on(provider, user => {  \n      this.popup.close()\n      this.setState({user})\n    })\n  }\n\n  checkPopup() {\n    const check = setInterval(() => {\n      const { popup } = this\n      if (!popup || popup.closed || popup.closed === undefined) {\n        clearInterval(check)\n        this.setState({ disabled: ''})\n      }\n    }, 1000)\n  }\n  \n  // Launches the popup by making a request to the server and then \n  // passes along the socket id so it can be used to send back user \n  // data to the appropriate socket on the connected client.\n  openPopup() {\n    const { provider, socket } = this.props\n    const width = 600, height = 600\n    const left = (window.innerWidth / 2) - (width / 2)\n    const top = (window.innerHeight / 2) - (height / 2)\n    // const url = `${API_URL}/${provider}?socketId=${socket.id}`\n\n    return window.open(url, '',       \n      `toolbar=no, location=no, directories=no, status=no, menubar=no, \n      scrollbars=no, resizable=no, copyhistory=no, width=${width}, \n      height=${height}, top=${top}, left=${left}`\n    )\n  }\n\n  // Kicks off the processes of opening the popup on the server and listening \n  // to the popup. It also disables the login button so the user can not \n  // attempt to login to the provider twice.\n  startAuth(e) {\n    if (!this.state.disabled) {\n      e.preventDefault()\n      this.popup = this.openPopup()  \n      this.checkPopup()\n      this.setState({disabled: 'disabled'})\n    }\n  }\n\n  closeCard() {\n    this.setState({user: {}})\n  }\n  render() {\n    const { name, photo} = this.state.user\n    const { provider } = this.props\n    const { disabled } = this.state\n    \n    return (\n      <div>\n        {name\n          ? <div className={'card'}>              \n              <img src={photo} alt={name} />\n              <FontAwesome\n                name={'times-circle'}\n                className={'close'}\n                onClick={this.closeCard.bind(this)}\n              />\n              <h4>{name}</h4>\n            </div>\n          : <div className={'button-wrapper fadein-fast'}>\n              <button \n                onClick={this.startAuth.bind(this)} \n                className={`${provider} ${disabled} button`}\n              >\n                <FontAwesome\n                  name={provider}\n                />\n              </button>\n            </div>\n        }\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}